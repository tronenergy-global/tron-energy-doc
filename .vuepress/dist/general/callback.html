<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/tron-energy-doc/images/logo.png"><meta name="yandex-verification" content="512d0ae5e3361304"><link hreflang="en" href="/tron-energy-doc/"><link hreflang="ru" href="/tron-energy-doc/ru/"><link hreflang="zh-Hans" href="/tron-energy-doc/zh/"><script>
      (function() {
        var base = 'https://develop.itrx.io';
        var link = document.createElement('link');
        link.rel = 'canonical';
        link.href = base + window.location.pathname;
        document.head.appendChild(link);
      })();
    </script><title>callback | Buy/Rent Tron Energy Documentation</title><meta name="description" content="Provides Tron energy leasing services, buying Tron energy, purchasing TRX energy, acquiring TRX energy, and resolving insufficient TRX transaction fees">
    <link rel="preload" href="/tron-energy-doc/assets/style-004b31f9.css" as="style"><link rel="stylesheet" href="/tron-energy-doc/assets/style-004b31f9.css">
    <link rel="modulepreload" href="/tron-energy-doc/assets/app-5b967fec.js"><link rel="modulepreload" href="/tron-energy-doc/assets/callback.html-c7082e59.js"><link rel="modulepreload" href="/tron-energy-doc/assets/callback.html-2c43a7a0.js"><link rel="prefetch" href="/tron-energy-doc/assets/100-before.html-c0b5e1a8.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-ab1b7862.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-f15fbbee.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/api-summary.html-88c44f8f.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index-data.html-e37b7b2a.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-auto-policy.html-967b35fb.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-collect.html-a899ac98.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-count-policy.html-2f49e04e.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-create.html-c271b61f.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-expiring.html-4452ed40.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-price.html-6f82871c.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-process.html-343c2e36.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-query.html-b2129506.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-recliam.html-6a762245.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-transfer-trx.html-a9d669f5.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-a071956c.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/error-code.html-8dd4257d.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/sign.html-a3a0ec73.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/100-before.html-d68ebbc5.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-5928b1c1.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/100-before.html-de993974.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-2865ce01.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-dc29b9f6.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/auto.html-b0e787fc.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-56088dc7.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/api-summary.html-e6333942.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index-data.html-34b53086.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-auto-policy.html-daa47c58.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-collect.html-00d42cd7.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-count-policy.html-551e1e57.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-create.html-39494418.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-expiring.html-f2cf7f4b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-price.html-6ed17c05.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-process.html-b4094d9b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-query.html-b58afecf.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-recliam.html-f2a51a8e.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-transfer-trx.html-885e6df8.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-cd8037b9.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/callback.html-0d8c7313.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/error-code.html-6d5a9c55.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/sign.html-435882d5.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-21a4f07c.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/auto.html-4742f228.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-981502a3.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/api-summary.html-61c15b0a.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index-data.html-3eb3238e.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-auto-policy.html-5a692ffd.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-collect.html-b9146a37.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-count-policy.html-08623ec1.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-create.html-31ac23a0.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-expiring.html-afff958e.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-price.html-512e9acf.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-process.html-80c97d90.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-query.html-c33c52f3.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-recliam.html-1f7f1f7b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-transfer-trx.html-2544e74c.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-46cdec21.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/auto.html-34a296a0.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-88500c1a.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/callback.html-af0d6573.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/error-code.html-c55787f3.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/sign.html-ba07270f.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/100-before.html-23d32b86.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-3b9543d9.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-0ee3a6c8.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/api-summary.html-b2ba9903.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index-data.html-69d0763f.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-auto-policy.html-87e65f3b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-collect.html-4cbbcf6b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-count-policy.html-dda41073.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-create.html-759abb92.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-expiring.html-8d9afae0.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-price.html-fad67c99.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-process.html-d367b6df.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-query.html-25d08e6e.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-recliam.html-c51e232b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-transfer-trx.html-3adaed34.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-3b809d8c.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/error-code.html-569d93f5.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/sign.html-ea5756f5.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/100-before.html-e1bbe856.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-70b5935d.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/100-before.html-a015c366.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-118fc359.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-d3fd1956.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/auto.html-147714de.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-2c563c6d.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/api-summary.html-c67029a8.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index-data.html-a696d0a5.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-auto-policy.html-22e13deb.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-collect.html-93090e5a.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-count-policy.html-66656cf9.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-create.html-4e6d6353.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-expiring.html-6d3a2de6.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-price.html-c7f86e60.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-process.html-f83fa168.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-query.html-33a8c50a.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-recliam.html-6d631d32.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-transfer-trx.html-42f367a8.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-2d556aa0.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/callback.html-f54ec387.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/error-code.html-ba22099b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/sign.html-042dd214.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-a3d041a7.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/auto.html-6791454b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-9b67200a.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/api-summary.html-9024228e.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index-data.html-72ce4918.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-auto-policy.html-5977acc2.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-collect.html-d649acca.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-count-policy.html-481ca280.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-create.html-d32479f4.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-expiring.html-311b8a0b.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-price.html-025855a3.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-process.html-8cce1709.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-query.html-b64f2838.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-recliam.html-ea5908b2.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/order-transfer-trx.html-e0449256.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-faa8cea3.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/auto.html-b515e77c.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/index.html-3736b86c.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/callback.html-e00d7201.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/error-code.html-9e48f340.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/sign.html-2c1ec355.js" as="script"><link rel="prefetch" href="/tron-energy-doc/assets/404.html-292ffbc0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/tron-energy-doc/" class=""><img class="logo" src="/tron-energy-doc/images/logo.png" alt="Buy/Rent Tron Energy Documentation"><span class="site-name can-hide">Buy/Rent Tron Energy Documentation</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/tron-energy-doc/general/callback.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tron-energy-doc/zh/general/callback.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tron-energy-doc/ru/general/callback.html" class="" aria-label="Русский"><!--[--><!--]--> Русский <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/tron-energy-doc/general/callback.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tron-energy-doc/zh/general/callback.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tron-energy-doc/ru/general/callback.html" class="" aria-label="Русский"><!--[--><!--]--> Русский <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/tron-energy-doc/100-before" class="sidebar-item sidebar-heading" aria-label="Prepare"><!--[--><!--]--> Prepare <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/general" class="router-link-active sidebar-item sidebar-heading active" aria-label="General"><!--[--><!--]--> General <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tron-energy-doc/general/sign.html" class="sidebar-item" aria-label="How to sign"><!--[--><!--]--> How to sign <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/general/error-code.html" class="sidebar-item" aria-label="API return value"><!--[--><!--]--> API return value <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tron-energy-doc/general/callback.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="callback"><!--[--><!--]--> callback <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/tron-energy-doc/general/callback.html#respond-retry" class="router-link-active router-link-exact-active sidebar-item" aria-label="Respond &amp; Retry"><!--[--><!--]--> Respond &amp; Retry <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tron-energy-doc/general/callback.html#verification" class="router-link-active router-link-exact-active sidebar-item" aria-label="Verification"><!--[--><!--]--> Verification <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/tron-energy-doc/general/callback.html#code-example" class="router-link-active router-link-exact-active sidebar-item" aria-label="Code Example"><!--[--><!--]--> Code Example <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/tron-energy-doc/api" class="sidebar-item sidebar-heading" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tron-energy-doc/api/index-data.html" class="sidebar-item" aria-label="Public data query"><!--[--><!--]--> Public data query <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-create.html" class="sidebar-item" aria-label="Place an order"><!--[--><!--]--> Place an order <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-transfer-trx.html" class="sidebar-item" aria-label="Transferring small amounts of TRX"><!--[--><!--]--> Transferring small amounts of TRX <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-count-policy.html" class="sidebar-item" aria-label="Purchase by number of transfers"><!--[--><!--]--> Purchase by number of transfers <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-auto-policy.html" class="sidebar-item" aria-label="Smart Delegate"><!--[--><!--]--> Smart Delegate <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-query.html" class="sidebar-item" aria-label="Order query (single)"><!--[--><!--]--> Order query (single) <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-recliam.html" class="sidebar-item" aria-label="Order recycling (single)"><!--[--><!--]--> Order recycling (single) <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-price.html" class="sidebar-item" aria-label="Estimated order amount"><!--[--><!--]--> Estimated order amount <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-process.html" class="sidebar-item" aria-label="Order in progress"><!--[--><!--]--> Order in progress <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-expiring.html" class="sidebar-item" aria-label="Expired orders soon"><!--[--><!--]--> Expired orders soon <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/api-summary.html" class="sidebar-item" aria-label="API usage summary"><!--[--><!--]--> API usage summary <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/tron-energy-doc/other" class="sidebar-item sidebar-heading" aria-label="Others"><!--[--><!--]--> Others <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tron-energy-doc/other/auto.html" class="sidebar-item" aria-label="Smart hosting"><!--[--><!--]--> Smart hosting <!--[--><!--]--></a><!----></li><li><a href="/tron-energy-doc/api/order-collect.html" class="sidebar-item" aria-label="Collection API"><!--[--><!--]--> Collection API <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="callback" tabindex="-1"><a class="header-anchor" href="#callback" aria-hidden="true">#</a> callback</h1><p>After the current commissioned energy is completed, it will try to send a message to notify the initiator. There are currently two places where you can set the callback address.</p><ul><li><ol><li>In <a href="https://%7Bdomain%7D/buyer/me" target="_blank" rel="noopener noreferrer">My<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> settings, set the default callback address</li></ol></li><li><ol start="2"><li>Specify the callback_url parameter to overwrite the default callback address when placing an order.</li></ol></li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>data = <span class="token punctuation">{</span>
    &#39;energy_amount&#39;<span class="token operator">:</span> &#39;<span class="token number">32000</span>&#39;<span class="token punctuation">,</span>
    &#39;period&#39;<span class="token operator">:</span> &#39;1H&#39;<span class="token punctuation">,</span>
    &#39;receive_address&#39;<span class="token operator">:</span> &#39;TExWKszFWYTKZH8LYiovAPKzS3L9MLZ4kw&#39;<span class="token punctuation">,</span>
    &#39;callback_url&#39;<span class="token operator">:</span> &#39;http<span class="token operator">:</span><span class="token comment">//{mydomain}/callback&#39;,</span>
    &#39;out_trade_no&#39;<span class="token operator">:</span> &#39;<span class="token number">123456</span>&#39;<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="respond-retry" tabindex="-1"><a class="header-anchor" href="#respond-retry" aria-hidden="true">#</a> Respond &amp; Retry</h2><p>The response body is as follows</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
     &#39;active_hash&#39;<span class="token operator">:</span> &#39;&#39;<span class="token punctuation">,</span> <span class="token comment">// If activated, activated txid</span>
     &#39;bandwidth_hash&#39;<span class="token operator">:</span> &#39;5e342a821de72542d7b341039c34af631d0551cfcd4b67c272&#39;<span class="token punctuation">,</span> <span class="token comment">// If there is bandwidth, the txid of the bandwidth</span>
     &#39;energy_amount&#39;<span class="token operator">:</span> <span class="token number">32000</span><span class="token punctuation">,</span> <span class="token comment">// Order energy</span>
     &#39;out_trade_no&#39;<span class="token operator">:</span> &#39;<span class="token number">123456</span>&#39;<span class="token punctuation">,</span> <span class="token comment">// External order number</span>
     &#39;pay_amount&#39;<span class="token operator">:</span> <span class="token number">32170.005048646104</span><span class="token punctuation">,</span> <span class="token comment">// Actual commission energy</span>
     &#39;serial&#39;<span class="token operator">:</span> &#39;886294f5204ac2fc1430f5a7d9215a80&#39;<span class="token punctuation">,</span> <span class="token comment">// Internal order number</span>
     &#39;txid&#39;<span class="token operator">:</span> &#39;2610c200efc8a90601758715405fa6be4597469e854591975d113b720a762ec2&#39;<span class="token punctuation">,</span> <span class="token comment">// txid of energy</span>
     &#39;status&#39;<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token comment">// Status 40 is successful, 41 is failed</span>
     type&#39;<span class="token operator">:</span> &#39;energy&#39;<span class="token punctuation">,</span> <span class="token comment">// type</span>
     &#39;receive_address&#39;<span class="token operator">:</span> &#39;Txxxxxx&#39;<span class="token punctuation">,</span> <span class="token comment">// receive address</span>
     &#39;source&#39;<span class="token operator">:</span> &#39;manual/api/auto_delegate/count_delegate&#39;<span class="token punctuation">,</span> <span class="token comment">// order source</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you receive the callback information, you only need to return <code>HTTP 200</code>, which means that the message has been processed and this callback will no longer be sent. Otherwise, it will try to send repeatedly until the expected response is obtained. The current retry frequency is <code>15s, 15s, 30s, 180s, 600s, 1200s, 1800s</code>. If there is no response, it will not be sent again.</p><h2 id="verification" tabindex="-1"><a class="header-anchor" href="#verification" aria-hidden="true">#</a> Verification</h2><p>When the server sends a callback message, it will use the order API to sign. The receiver needs to verify the signature and then perform logical processing, otherwise unnecessary losses may be caused. The server&#39;s signature process and order initiation [signature](/general/ sign.md), the receiver needs to use the timestamp in the callback request for encryption, and verify whether the <code>SIGNATURE</code> of the callback is consistent.</p><h2 id="code-example" tabindex="-1"><a class="header-anchor" href="#code-example" aria-hidden="true">#</a> Code Example</h2><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">Python</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Php</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Java</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Go</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Shell</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> hmac
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> time
<span class="token keyword">import</span> json

<span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token keyword">def</span> <span class="token function">_verify_signature</span><span class="token punctuation">(</span>signature<span class="token punctuation">,</span> timestamp<span class="token punctuation">)</span><span class="token punctuation">:</span>
       api_secret <span class="token operator">=</span> <span class="token string">&#39;0285A2741D0E76E2E187260EB23E51851D48403A756333E7D0CF845406ABF3E8&#39;</span>
       json_data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>request<span class="token punctuation">.</span>data<span class="token punctuation">,</span> sort_keys<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>


       message <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>timestamp<span class="token punctuation">}</span></span><span class="token string">&amp;</span><span class="token interpolation"><span class="token punctuation">{</span>json_data<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span>
       expected_signature <span class="token operator">=</span> hmac<span class="token punctuation">.</span>new<span class="token punctuation">(</span>api_secret<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>


       <span class="token keyword">return</span> hmac<span class="token punctuation">.</span>compare_digest<span class="token punctuation">(</span>signature<span class="token punctuation">,</span> expected_signature<span class="token punctuation">)</span>


   signature <span class="token operator">=</span> request<span class="token punctuation">.</span>META<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;HTTP_SIGNATURE&#39;</span><span class="token punctuation">)</span>
   timestamp <span class="token operator">=</span> request<span class="token punctuation">.</span>META<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;HTTP_TIMESTAMP&#39;</span><span class="token punctuation">)</span>


   <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>signature<span class="token punctuation">,</span> timestamp<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
       <span class="token keyword">return</span> <span class="token boolean">None</span>


   <span class="token keyword">if</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">float</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">:</span>
       <span class="token comment"># 视情况，是否要继续处理</span>
       <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;timestamp expired&#39;</span><span class="token punctuation">)</span>


   <span class="token keyword">if</span> _verify_signature<span class="token punctuation">(</span>signature<span class="token punctuation">,</span> timestamp<span class="token punctuation">)</span><span class="token punctuation">:</span>
       <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
   <span class="token keyword">else</span><span class="token punctuation">:</span>
       <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;verify signature failed&#39;</span><span class="token punctuation">)</span>


   <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$api_secret</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;0285A2741D0E76E2E187260EB23E51851D48403A756333E7D0CF845406ABF3E8&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$headers</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// your headers here</span>
<span class="token variable">$body</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// your body data here</span>

<span class="token variable">$timestamp</span> <span class="token operator">=</span> <span class="token variable">$headers</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;TIMESTAMP&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$signature</span> <span class="token operator">=</span> <span class="token variable">$headers</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;SIGNATURE&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">ksort</span><span class="token punctuation">(</span><span class="token variable">$body</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$json_data</span> <span class="token operator">=</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$body</span><span class="token punctuation">,</span> <span class="token constant">JSON_UNESCAPED_SLASHES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$message</span> <span class="token operator">=</span> <span class="token variable">$timestamp</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;&amp;&#39;</span> <span class="token operator">.</span> <span class="token variable">$json_data</span><span class="token punctuation">;</span>
<span class="token variable">$expected_signature</span> <span class="token operator">=</span> <span class="token function">hash_hmac</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sha256&#39;</span><span class="token punctuation">,</span> <span class="token variable">$message</span><span class="token punctuation">,</span> <span class="token variable">$api_secret</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hash_equals</span><span class="token punctuation">(</span><span class="token variable">$signature</span><span class="token punctuation">,</span> <span class="token variable">$expected_signature</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Signature is valid.\n&quot;</span><span class="token punctuation">;</span>
    <span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$body</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;Signature is invalid.\n&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>digest<span class="token punctuation">.</span></span><span class="token class-name">HmacAlgorithms</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>digest<span class="token punctuation">.</span></span><span class="token class-name">HmacUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span></span><span class="token class-name">Gson</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span></span><span class="token class-name">GsonBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> apiSecret <span class="token operator">=</span> <span class="token string">&quot;0285A2741D0E76E2E187260EB23E51851D48403A756333E7D0CF845406ABF3E8&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// your headers here</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// your body data here</span>

        <span class="token class-name">String</span> timestamp <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;TIMESTAMP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> signature <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;SIGNATURE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disableHtmlEscaping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> sortedBody <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> jsonData <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>sortedBody<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> message <span class="token operator">=</span> timestamp <span class="token operator">+</span> <span class="token string">&quot;&amp;&quot;</span> <span class="token operator">+</span> jsonData<span class="token punctuation">;</span>
        <span class="token class-name">String</span> expectedSignature <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HmacUtils</span><span class="token punctuation">(</span><span class="token class-name">HmacAlgorithms</span><span class="token punctuation">.</span><span class="token constant">HMAC_SHA_256</span><span class="token punctuation">,</span> apiSecret<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hmacHex</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>signature<span class="token punctuation">,</span> expectedSignature<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Signature is valid.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Signature is invalid.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;crypto/hmac&quot;</span>
    <span class="token string">&quot;crypto/sha256&quot;</span>
    <span class="token string">&quot;encoding/hex&quot;</span>
    <span class="token string">&quot;encoding/json&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;sort&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Body <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>b Body<span class="token punctuation">)</span> <span class="token function">MarshalJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    keys <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> k <span class="token operator">:=</span> <span class="token keyword">range</span> b <span class="token punctuation">{</span>
        keys <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> k<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    sort<span class="token punctuation">.</span><span class="token function">Strings</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span>

    result <span class="token operator">:=</span> <span class="token string">&quot;{&quot;</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> k <span class="token operator">:=</span> <span class="token keyword">range</span> keys <span class="token punctuation">{</span>
        value<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
        result <span class="token operator">+=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span>`<span class="token string">&quot;%s&quot;</span><span class="token punctuation">:</span><span class="token operator">%</span>s<span class="token punctuation">,</span>`<span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    result <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    apiSecret <span class="token operator">:=</span> <span class="token string">&quot;0285A2741D0E76E2E187260EB23E51851D48403A756333E7D0CF845406ABF3E8&quot;</span>
    headers <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// your headers here</span>
    body <span class="token operator">:=</span> Body<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// your body data here</span>

    timestamp <span class="token operator">:=</span> headers<span class="token punctuation">[</span><span class="token string">&quot;TIMESTAMP&quot;</span><span class="token punctuation">]</span>
    signature <span class="token operator">:=</span> headers<span class="token punctuation">[</span><span class="token string">&quot;SIGNATURE&quot;</span><span class="token punctuation">]</span>

    jsonData<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
    message <span class="token operator">:=</span> timestamp <span class="token operator">+</span> <span class="token string">&quot;&amp;&quot;</span> <span class="token operator">+</span> <span class="token function">string</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span>

    mac <span class="token operator">:=</span> hmac<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>sha256<span class="token punctuation">.</span>New<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>apiSecret<span class="token punctuation">)</span><span class="token punctuation">)</span>
    mac<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span>
    expectedSignature <span class="token operator">:=</span> hex<span class="token punctuation">.</span><span class="token function">EncodeToString</span><span class="token punctuation">(</span>mac<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> signature <span class="token operator">==</span> expectedSignature <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Signature is valid.&quot;</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Signature is invalid.&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">api_secret</span><span class="token operator">=</span><span class="token string">&quot;0285A2741D0E76E2E187260EB23E51851D48403A756333E7D0CF845406ABF3E8&quot;</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable">$HTTP_TIMESTAMP</span>
<span class="token assign-left variable">signature</span><span class="token operator">=</span><span class="token variable">$HTTP_SIGNATURE</span>
<span class="token assign-left variable">body</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $HTTP_BODY <span class="token operator">|</span> jq <span class="token parameter variable">-S</span> <span class="token builtin class-name">.</span><span class="token variable">)</span></span>  <span class="token comment"># Requires jq to sort keys in json.</span>

<span class="token assign-left variable">message</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${timestamp}</span>&amp;<span class="token variable">${body}</span>&quot;</span>
<span class="token assign-left variable">expected_signature</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">${message}</span>&quot;</span> <span class="token operator">|</span> openssl dgst <span class="token parameter variable">-sha256</span> <span class="token parameter variable">-hmac</span> <span class="token string">&quot;<span class="token variable">${api_secret}</span>&quot;</span><span class="token variable">)</span></span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${signature}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;<span class="token variable">${expected_signature}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Signature is valid.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${body}</span>&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Signature is invalid.&quot;</span>
<span class="token keyword">fi</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/tron-energy-doc/general/error-code.html" class="" aria-label="API return value"><!--[--><!--]--> API return value <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/tron-energy-doc/assets/app-5b967fec.js" defer></script>
  </body>
</html>
